window.TrackChanges=function(e){var t={workerCallInterval:100},n=[],r={},o={activated:!1},a=function(){if(!1===o.activated){o.activated=!0;var e=setInterval((function(){0===n.length&&(o.activated=!1,clearInterval(e));for(var t=0;t<n.length;t++){var a=n[t],i=a[0],c=a[1],f=a[2].activated,d=a[2].remove,v=a[2].once,h=a[2].oldValue,s=a[2].type;"triggerEvent"===s?(!0===r[i].func()&&!1===f&&(c(),n[t][2].activated=!0),!0===d&&n.splice(t,1),!0===v&&!0===f&&n.splice(t,1),!0===f&&!0!==r[i].func()&&(n[t][2].activated=!1)):"morphEvent"===s&&(r[i].value()!==h&&!1===f&&(c(),n[t][2].activated=!0,n[t][2].oldValue=r[i].value()),!0===d&&n.splice(t,1),!0===v&&!0===f&&n.splice(t,1),!0===f&&r[i].value()!==h&&(n[t][2].activated=!1))}}),t.workerCallInterval)}},i=function(e,t,o,i){"addTask"===o&&"morph"===r[e].type&&(n.push([e,t,{activated:!1,remove:!1,once:i,type:"morphEvent",oldValue:r[e].value()}]),a()),"addTask"===o&&"trigger"===r[e].type&&(n.push([e,t,{activated:!1,remove:!1,once:i,type:"triggerEvent"}]),a()),"removeTask"===o&&!0===r.hasOwnProperty(e)&&function(e,t,r){for(var o=0;o<n.length;o++)n[o][0]===e&&n[o][1]===t&&(n[o][2][r.name]=r.value)}(e,t,{name:"remove",value:!0})};this.on=function(e,t,n){if(!1===r.hasOwnProperty(e))throw new Error('Error adding listener. Event "'+e+'" has not been described, describe it using the .add (...) method');if("string"!=typeof e||"function"!=typeof t&&("boolean"!=typeof n||void 0!==n))throw new Error("Error adding listener. Scheme .on(string: eventName, function: callback, boolean: onceMode | undefined: onceMode )");i(e,t,"addTask",n)},this.off=function(e,t){if(!1===r.hasOwnProperty(e))throw new Error('Error deleting handler. Event "'+e+'" has not been described, describe it using the .add (...) method');if("string"!=typeof e||"function"!=typeof t)throw new Error("Error remove listener. Scheme .off(string: eventName, function: callback)");i(e,t,"removeTask")},this.add=function(e,t){if("object"==typeof e&&void 0===t)Object.keys(e).forEach((function(t){if("function"!=typeof e[t])throw new Error("The description of the event with the name"+t+" was created incorrectly, the key value is not a function.");r[t]={func:e[t],type:"trigger"}}));else{if("object"!=typeof e||"morph"!==t)throw new Error("Incorrect event description.");Object.keys(e).forEach((function(t){if("function"!=typeof e[t])throw new Error("The description of the event with the name"+t+" was created incorrectly, the key value is not a function.");r[t]={value:e[t],type:"morph"}}))}},this.remove=function(e){!0===r.hasOwnProperty(e)&&"string"==typeof e&&delete r[e]};var c=function(e,t){Object.keys(e).forEach((function(n){t[n]=e[n]}))};!function(e){"object"==typeof e&&c(e,t)}(e)};